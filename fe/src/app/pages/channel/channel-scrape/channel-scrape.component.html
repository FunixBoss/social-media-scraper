<nb-card [formGroup]="scrapeChannelsFormGroup" [nbSpinner]="isCrawling">
    <nb-card-header>
        Scrape Channels
    </nb-card-header>
    <nb-card-body>
        <div formArrayName="usernames">
            <div *ngFor="let control of usernames.controls; let i = index" >
                <div class="row mt-2">
                    <div class="col-11">
                        <input type="text" fullWidth nbInput placeholder="Enter username" [formControlName]="i">
                    </div>
                    <div class="col-1">
                        <button nbButton status="danger" (click)="removeNameField(i)">
                            <nb-icon icon="close-outline"></nb-icon>
                        </button>
                    </div>
                </div>
                <!-- Validation Error Messages -->
                <div class="alert alert-danger mt-0 mb-3" *ngIf="control.invalid && (control.dirty || control.touched)">
                    <div *ngIf="control.errors['notblank']">
                        Username is required
                    </div>
                    <div *ngIf="control.errors['maxlength']">
                        Username must not exceed 200 characters
                    </div>
                </div>
            </div>
        </div>



        <div formGroupName="crawls" class="mt-3">
            <div *ngFor="let crawl of crawls">
                <nb-checkbox [formControlName]="crawl" [disabled]="crawl === 'PROFILE'">{{ crawl }}</nb-checkbox>
            </div>
        </div>
    </nb-card-body>
    <nb-card-footer>
        <div class="row">
            <div class="col d-flex justify-content-between">
                <button nbButton hero status="primary" (click)="scrapeChannels()">Crawl</button>
                <button nbButton status="success" (click)="addNameField()">
                    <nb-icon icon="plus-square-outline"></nb-icon>
                    Add Username
                </button>
            </div>
        </div>
    </nb-card-footer>
</nb-card>